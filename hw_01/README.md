## Домашная работа №1 (`HW #1 (BMP)`)

0. Общее.
   * Срок: три недели;
   * Даётся три попытки сдачи и устанавливается три дедлайна;
     После дедлайна все присланные решения проверяются;
   * Даты дедлайнов для группы 18.Б09:
     1. 08:00 08 ноября;
     0. 08:00 15 ноября;
     0. 08:00 22 ноября.
   * Даты дедлайнов для группы 18.Б10:
     1. 00:00 12 ноября;
     0. 00:00 19 ноября;
     0. 00:00 26 ноября.

1. Основное задание.

   Написать программу, которая вырезает из картинки заданную область, поворачивает
   эту область по часовой стрелке на 90 градусов и сохраняет результат
   в новом файле.

   1. Формат картинок:
      * входной и выходной файл в формате *BMP*;
      * *DIB* формат — `BITMAPINFOHEADER`;
      * беспалитровый;
      * 24 бита на цвет;
      * без сжатия;
      * файл всегда соответствует формату (проверять не нужно);
      * все поля стандартных BMP заголовков в выходном файле должны иметь те же
        значения, что и во входном (кроме тех, которые изменяются, например, размер);
      * если необходимо выравнивание, дописывать следует нули;
      * пиксель с координатой (0, 0) — левый верхний на изображении.

      *Hints*:
      * В качестве примера корректного файла вам дан `lena_512.bmp`;
      * Обратите внимание на порядок записи пикселей.

   0. Описание интерфейса.

      Программа получает параметры из командной строки и должна проверить
      их корректность.
      ```
      ./main crop-rotate <in-bmp> <out-bmp> <x> <y> <w> <h>
      ```
      Последние 4 параметра задают прямоугольную область, которую следует вырезать:
      *(x, y)* — левый верхний угол области (отсчет от точки *(0, 0)*),
      *(w, h)* — ширина и высота области.

      Если программа получила некорректные параметры или есть проблемы
      с чтением входного файла, выделением памяти и т.п.,
      то программа возвращает операционной системе ненулевой код возврата
      (`return` в `main`).

      Рекомендуется реализовать несколько функций
      (например, `load_bmp`, `crop`, `rotate`, `save_bmp`).

   0. Требования к решению.

      * Исходные тексты (минимум): `main.c`, `bmp.c`, `bmp.h`;
      * `Makefie` (с целью `clean`);
      * Язык программирования — C;
      * Обязательные флаги при сборке (явно указать в Makefile):
         `-std=c99`, `-Wall`, `-Werror`;
      * Можно пользоваться только стандартной библиотекой языка C;
      * Решение сдается через Subversion;
      * Корректная работа с памятью (если программа завершается аварийно,
        память можно не освобождать);
      * Можно хранить обрабатываемую картинку в памяти полностью.

   0. Оценка.
      * Корректность решения оценивется из 20 баллов.
      * Стилевые и архитектурные решения оцениваются из 10 баллов.

0. Задание на дополнительные баллы.

   Eсли изменить младшиe биты (*LSB*) в некоторых цветовых компонентах (*BGR* у *BMP*)
   у некоторых пикселей, то глаз наблюдателя не заметит изменений в картинке.
   Этот эффект можно использовать для скрытного внедрения в картинку сообщений
   (стеганографии).

   Для внедрения и извлечения данных из картинки необходимо знать ключ,
   который задает компоненты и пиксели, которые хранят биты сообщения.

   Алгоритм работы следующий: биты символов сообщения внедряются в пиксели согласно ключу
   (по одному биту сообщения на пиксель, младший бит символа внедряется первым).

   Считаем, что сообщение состоит из прописных английских букв, пробела, точки, запятой
   (26 + 3 = 29 символов ⇒ 5 бит на символ, порядок кодирования указан выше).

   1. Интерфейс.

      Встраивание сообщения:
      ```
      ./main insert <in-bmp> <out-bmp> <key-txt> <msg-txt>
      ```
      Извлечение сообщения:
      ```
      ./main extract <in-bmp> <key-txt> <msg-txt>
      ```
      `in-bmp`, `out-bmp`, `key-txt`, `msg-txt` — имена файлов.

   0. Формат ключа

      Ключ задается текстовым файлом, каждая строка которого содержит 2 числа и
      символ через пробелы (`x y component`), указывающие позицию для вставки
      (например, `20 10 B` — x = 20, y = 10, цветовой компонент *B*). Компоненты: *R*, *G*, *B*.

      Предполагается, что входное сообщение, картинка и ключ соответствуют друг другу,
      т.е. позиций в ключе столько же, сколько символов в сообщении умножить на 5,
      а в картинке есть все пиксели, указанные в ключе.

   0. Оценка.
      * Проверяется при корректном решении базового задания;
      * Корректность оценивается из 10 баллов.
